# GitHub 소스코드 플로우 분석 Slack Bot 요구사항 정의서

## 개요

GitHub Issue/PR을 분석하여 관련 소스코드의 전체 플로우를 자동으로 파악하고, 분석 결과를 Slack Bot을 통해 제공하는 도구입니다. 이 시스템은 Client → API → Server → DB까지의 전체 데이터 플로우를 추적하고, 버그 수정 및 기능 추가에 필요한 영향 범위를 시각적으로 제공합니다.

## 사용자 스토리

### 스토리 1: 코드 플로우 분석 요청

- **개발자로서**
- **나는 GitHub Issue/PR URL을 Slack Bot에 제공하여 관련 소스코드의 플로우를 분석하고 싶다**
- **그렇게 함으로써 버그 수정이나 기능 추가 시 영향 범위를 빠르게 파악할 수 있다**

### 스토리 2: 분석 결과 확인

- **개발자로서**
- **나는 분석된 코드 플로우를 계층적 트리 구조나 다이어그램으로 확인하고 싶다**
- **그렇게 함으로써 코드 변경이 필요한 지점과 의존성을 시각적으로 이해할 수 있다**

### 스토리 3: 잠재적 이슈 식별

- **개발자로서**
- **나는 분석 과정에서 발견된 잠재적 이슈(입력 검증 누락, 에러 처리 부재 등)를 확인하고 싶다**
- **그렇게 함으로써 코드 품질을 향상시키고 버그를 사전에 방지할 수 있다**

### 스토리 4: 상세 분석 보고서 저장

- **개발자로서**
- **나는 분석 결과를 타임스탬프가 포함된 마크다운 파일로 저장하고 싶다**
- **그렇게 함으로써 분석 이력을 관리하고 팀원들과 공유할 수 있다**

### 스토리 5: Claude Code 연동

- **개발자로서**
- **나는 Claude Code에서 `/analyze-github-url` 명령어를 사용하여 GitHub URL을 분석하고 싶다**
- **그렇게 함으로써 개발 환경에서 직접 소스코드 플로우 분석을 수행할 수 있다**

### 스토리 6: Slack 연동 내보내기

- **개발자로서**
- **나는 Claude Code에서 `/export-to-slack` 명령어를 사용하여 분석 보고서를 Slack으로 전송하고 싶다**
- **그렇게 함으로써 팀원들과 분석 결과를 즉시 공유할 수 있다**

## 기능 요구사항(EARS 기법)

### 일반 요구사항

- REQ-001: 시스템은 GitHub Issue/PR URL을 입력받아 분석해야 한다
- REQ-002: 시스템은 clientv/router.ts를 시작점으로 전체 플로우를 추적해야 한다
- REQ-003: 시스템은 Client → API → Server → DB 플로우를 매핑해야 한다
- REQ-004: 시스템은 분석 결과를 계층적 트리 구조로 출력해야 한다
- REQ-005: 시스템은 Slack Bot 인터페이스를 통해 명령어를 처리해야 한다
- REQ-006: 시스템은 분석 결과를 타임스탬프가 포함된 마크다운 파일로 저장해야 한다
- REQ-007: 시스템은 Claude Code 통합을 위한 `/analyze-github-url` 명령어를 제공해야 한다
- REQ-008: 시스템은 Claude Code 통합을 위한 `/export-to-slack` 명령어를 제공해야 한다
- REQ-009: 시스템은 Claude Code Command 표준 형식에 맞는 마크다운 파일을 생성해야 한다

### 조건부 요구사항

- REQ-101: GitHub Personal Access Token이 제공된 경우, 시스템은 Private 레포지토리에 접근해야 한다
- REQ-102: 버그 수정 타입의 Issue/PR인 경우, 시스템은 문제 발생 지점과 영향 범위를 특정해야 한다
- REQ-103: 기능 추가 타입의 Issue/PR인 경우, 시스템은 구현 필요 지점과 의존성을 파악해야 한다
- REQ-104: 파일 크기가 10MB를 초과하는 경우, 시스템은 해당 파일을 분석에서 제외해야 한다
- REQ-105: GitHub API rate limit에 도달한 경우, 시스템은 적절한 대기 시간을 두고 재시도해야 한다
- REQ-106: 분석 시간이 5분을 초과하는 경우, 시스템은 분석을 중단하고 부분 결과를 반환해야 한다
- REQ-107: Claude Code Command 파일이 생성되는 경우, 시스템은 `.commands/` 디렉토리 구조를 따라야 한다

### 상태 요구사항

- REQ-201: Public 레포지토리 접근 상태에서, 시스템은 GitHub API 인증 없이 분석을 수행해야 한다
- REQ-202: 분석 진행 상태에서, 시스템은 진행률을 Slack 메시지로 업데이트해야 한다
- REQ-203: 오류 발생 상태에서, 시스템은 상세한 오류 메시지와 해결 방안을 제공해야 한다

### 옵션 요구사항

- REQ-301: 시스템은 mermaid 다이어그램 형식으로 플로우를 출력해도 된다
- REQ-302: 시스템은 심층 분석(deep) 모드를 제공해도 된다
- REQ-303: 시스템은 분석 결과를 JSON 형식으로도 출력해도 된다
- REQ-304: 시스템은 코드 품질 점수를 제공해도 된다

### 제약 요구사항

- REQ-401: 시스템은 GitHub API rate limit(5000 req/hour)을 준수해야 한다
- REQ-402: 시스템은 허용된 Slack 워크스페이스에서만 사용 가능해야 한다
- REQ-403: 시스템은 GitHub Token과 Slack Token을 환경변수로 관리해야 한다
- REQ-404: 시스템은 AST(Abstract Syntax Tree) 기반 코드 분석을 사용해야 한다
- REQ-405: 시스템은 Claude Code Command 문서 표준(목적, 전제조건, 실행내용, 출력포맷)을 준수해야 한다

## 비기능 요구사항

### 성능

- NFR-001: 시스템은 일반적인 프로젝트(100개 파일 이하)를 3분 이내에 분석해야 한다
- NFR-002: 시스템은 GitHub API 응답 시간 500ms 이내를 목표로 해야 한다
- NFR-003: 시스템은 Slack Bot 응답 시간 3초 이내를 유지해야 한다
- NFR-004: 시스템은 동시 분석 요청 5개까지 처리해야 한다
- NFR-005: 시스템은 메모리 사용량 1GB 이하를 유지해야 한다

### 보안

- NFR-101: 시스템은 GitHub Personal Access Token을 안전하게 저장해야 한다
- NFR-102: 시스템은 Slack Token을 암호화하여 관리해야 한다
- NFR-103: 시스템은 HTTPS 통신만을 사용해야 한다
- NFR-104: 시스템은 민감한 정보(토큰, 패스워드)를 로그에 기록하지 않아야 한다
- NFR-105: 시스템은 사용자 입력에 대한 검증을 수행해야 한다

### 사용성

- NFR-201: 시스템은 직관적인 Slack 명령어 인터페이스를 제공해야 한다
- NFR-202: 시스템은 분석 진행 상황을 실시간으로 표시해야 한다
- NFR-203: 시스템은 에러 발생 시 사용자가 이해하기 쉬운 메시지를 제공해야 한다
- NFR-204: 시스템은 도움말 기능을 제공해야 한다

### 호환성

#### GitHub Integration
- NFR-301: GitHub API v4 (GraphQL)를 지원해야 한다
- NFR-302: Octokit.js 또는 PyGithub 라이브러리와 호환되어야 한다
- NFR-303: Public 및 Private 레포지토리를 모두 지원해야 한다

#### Slack Integration
- NFR-311: Slack Bolt Framework와 호환되어야 한다
- NFR-312: Slack App 권한 모델을 준수해야 한다
- NFR-313: 다양한 Slack 클라이언트(Desktop, Mobile, Web)에서 동작해야 한다

#### 배포 환경
- NFR-321: AWS Lambda + API Gateway 배포를 지원해야 한다
- NFR-322: Railway/Vercel 플랫폼 배포를 지원해야 한다
- NFR-323: Docker 컨테이너로 배포 가능해야 한다
- NFR-324: Node.js 18+ 또는 Python 3.9+ 환경을 지원해야 한다

## 엣지 케이스

### 오류 처리

- EDGE-001: GitHub 레포지토리가 존재하지 않는 경우 적절한 오류 메시지 반환
- EDGE-002: GitHub API 인증 실패 시 재인증 안내 메시지 제공
- EDGE-003: 분석 중 네트워크 오류 발생 시 자동 재시도 메커니즘 적용
- EDGE-004: 지원하지 않는 프로그래밍 언어 파일 발견 시 스킵 처리
- EDGE-005: 순환 의존성 발견 시 무한 루프 방지 및 경고 메시지 출력

### 경계값

- EDGE-101: 분석 대상 파일이 0개인 경우 적절한 안내 메시지 제공
- EDGE-102: 분석 대상 파일이 1000개를 초과하는 경우 샘플링 분석 수행
- EDGE-103: GitHub API rate limit 잔여량이 100 미만인 경우 분석 지연 안내
- EDGE-104: Slack 메시지 길이가 4000자를 초과하는 경우 파일 첨부로 전환
- EDGE-105: 분석 결과가 없는 경우(빈 플로우) 적절한 안내 메시지 제공

### 특수 상황

- EDGE-201: 동일한 Issue/PR에 대한 중복 분석 요청 시 캐시된 결과 활용
- EDGE-202: GitHub Issue와 PR이 연결된 경우 통합 분석 수행
- EDGE-203: 멀티 플랫폼 프로젝트(Frontend + Backend) 감지 시 구분된 분석 제공
- EDGE-204: Git submodule 포함 프로젝트 분석 시 서브모듈 제외 처리

## 수락 기준

### 기능 테스트

- [ ] GitHub Issue/PR URL 입력 시 정상적으로 분석이 수행된다
- [ ] clientv/router.ts 파일을 시작점으로 플로우 추적이 동작한다
- [ ] Claude Code `/analyze-github-url` 명령어가 정상 동작한다
- [ ] Claude Code `/export-to-slack` 명령어가 정상 동작한다
- [ ] 생성된 Claude Code Command 파일이 표준 형식을 준수한다
- [ ] `.commands/` 디렉토리 구조가 올바르게 생성된다
- [ ] API 엔드포인트에서 서버 코드로의 매핑이 정확하다
- [ ] 서버 코드에서 DB 스키마로의 연결 추적이 동작한다
- [ ] 분석 결과가 계층적 트리 구조로 출력된다
- [ ] Slack Bot 명령어 `/analyze-repo`가 정상 동작한다
- [ ] 분석 결과가 타임스탬프 포함 마크다운 파일로 저장된다

### 비기능 테스트

- [ ] 100개 파일 이하 프로젝트 분석이 3분 이내 완료된다
- [ ] GitHub API rate limit 준수가 확인된다
- [ ] Slack Bot 응답 시간이 3초 이내이다
- [ ] 동시 분석 요청 5개 처리가 가능하다
- [ ] 메모리 사용량이 1GB 이하로 유지된다
- [ ] GitHub Token 보안 저장이 확인된다
- [ ] HTTPS 통신 사용이 확인된다

### 플랫폼별 테스트

#### GitHub Integration
- [ ] Public 레포지토리 분석이 정상 동작한다
- [ ] Private 레포지토리 분석이 Personal Access Token으로 동작한다
- [ ] GitHub API v4 (GraphQL) 호출이 성공한다
- [ ] Issue 타입과 PR 타입 구분 분석이 동작한다

#### Slack Integration
- [ ] Slack Bolt Framework 연동이 정상 동작한다
- [ ] 명령어 파싱이 정확하다
- [ ] 옵션 파라미터(--type, --depth, --format) 처리가 동작한다
- [ ] 분석 진행 상황 실시간 업데이트가 동작한다
- [ ] 에러 메시지가 사용자 친화적으로 표시된다

#### 코드 분석 엔진
- [ ] TypeScript/JavaScript 파일 AST 파싱이 동작한다
- [ ] Import/Export 관계 매핑이 정확하다
- [ ] HTTP 요청/응답 플로우 추적이 동작한다
- [ ] ORM/SQL 쿼리 연결 관계 파악이 동작한다
- [ ] 순환 의존성 감지 및 처리가 동작한다

#### Claude Code Integration
- [ ] Claude Code Commands가 표준 마크다운 형식으로 생성된다
- [ ] `/analyze-github-url` 명령어 문서가 올바른 구조를 갖는다
- [ ] `/export-to-slack` 명령어 문서가 올바른 구조를 갖는다
- [ ] 명령어 파일에 목적, 전제조건, 실행내용, 출력포맷 섹션이 포함된다
- [ ] `.commands/` 디렉토리 구조 규칙을 준수한다

#### 배포 및 운영
- [ ] AWS Lambda 배포가 성공한다
- [ ] Docker 컨테이너 빌드 및 실행이 성공한다
- [ ] 환경변수 설정이 정상 로드된다
- [ ] Redis 캐싱 기능이 동작한다 (선택사항)
- [ ] 로깅 및 에러 추적이 동작한다

### 엣지 케이스 테스트

- [ ] 존재하지 않는 GitHub URL 입력 시 적절한 오류 처리
- [ ] GitHub API 인증 실패 시 재인증 안내
- [ ] 네트워크 오류 발생 시 자동 재시도
- [ ] 대용량 파일(10MB+) 자동 제외 처리
- [ ] 분석 시간 초과(5분+) 시 부분 결과 반환
- [ ] 빈 플로우 결과에 대한 적절한 안내
- [ ] 중복 분석 요청 시 캐시 활용