# TDD Green 단계 (최소한의 구현)

TDD의 Green 단계를 실행합니다.

## 사전 준비

개발 컨텍스트를 준비합니다:

**Task 도구 실행**: `/tdd-load-context`로 TDD 관련 파일 로드 및 컨텍스트 준비 실행

로드 완료 후, 준비된 컨텍스트 정보를 바탕으로 Green 단계(최소 구현) 작업을 시작합니다.

**테스트 실행 시 Task 도구를 사용하세요**

## 신뢰성 수준 지시

구현 코드 작성 시, 각 구현 내용에 대해 원본 자료와의 대조 상황을 다음 신호로 표시해주세요:

- 🟢 **초록불**: 원본 자료를 참고하여 거의 추측하지 않은 경우
- 🟡 **노란불**: 원본 자료에서 타당한 추론인 경우
- 🔴 **빨간불**: 원본 자료에 없는 추론인 경우

## 목표

Red 단계에서 생성한 테스트를 통과시키기 위한 **최소한의 구현**을 수행하세요.

## 구현 원칙

- **테스트 통과가 최우선**
- 코드의 아름다움은 다음 단계로 (Refactor 단계에서 개선)
- "우선 동작하는" 수준으로 OK
- 하드코딩도 괜찮음
- 복잡한 로직은 나중으로 미루고, 단순한 구현을 지향
- 테스트가 잘 통과하지 않을 경우, Task 도구를 사용하여 실패 원인을 조사한 후 수정 계획을 세우고 구현
- 기존 테스트가 오류가 나면 명세를 바탕으로 적절히 수정
- 절대: 필요한 테스트를 건너뛰지 말 것
- 절대: 필요한 테스트를 삭제하지 말 것

## 구현 시 한국어 주석 요구사항

구현 코드에는 반드시 다음 한국어 주석을 포함하세요:

### 함수/메서드 레벨 주석

```javascript
/**
 * 【기능 개요】: [이 함수가 무엇을 하는지 한국어로 설명]
 * 【구현 방향】: [왜 이런 구현 방식을 선택했는지 설명]
 * 【테스트 대응】: [어떤 테스트 케이스를 통과하기 위한 구현인지 명시]
 * 🟢🟡🔴 신뢰성 수준: [이 구현이 원본 자료를 얼마나 반영했는지]
 * @param {type} 매개변수명 - [매개변수 설명]
 * @returns {type} - [반환값 설명]
 */
function {{function_name}}(paramName) {
  // 【구현 내용】: [구현 중인 처리의 상세 설명]
}
```

### 처리 블록 레벨 주석

```javascript
function processData(input) {
  // 【입력값 검증】: [입력값의 유효성을 검사하는 이유와 방법] 🟢🟡🔴
  if (!input) {
    throw new Error('입력값이 유효하지 않습니다'); // 【오류 처리】: [왜 이 오류가 필요한지 설명] 🟢🟡🔴
  }

  // 【데이터 처리 시작】: [주요 처리 시작을 명시] 🟢🟡🔴
  // 【처리 방향】: [이 처리가 테스트 통과에 어떻게 기여하는지 설명] 🟢🟡🔴
  const result = {
    // 【결과 구조】: [반환값의 구조와 그 이유 설명]
    validData: [],
    invalidData: [],
    errors: [],
  };

  // 【결과 반환】: [처리 결과를 반환하는 이유와 내용 설명]
  return result;
}
```

### 변수/상수 주석

```javascript
// 【상수 정의】: [이 상수가 필요한 이유와 사용 목적]
const MAX_FILE_SIZE = 1024 * 1024; // 【제한값】: 파일 크기 상한선(1MB) 설정

// 【변수 초기화】: [이 변수가 테스트 통과를 위해 왜 필요한지 설명]
let processedCount = 0; // 【카운터】: 처리된 파일 수를 추적하기 위한 카운터
```

### 오류 처리 주석

```javascript
try {
  // 【실제 처리 실행】: [실제 처리를 실행하는 부분의 설명]
  const data = processFile(filePath);
} catch (error) {
  // 【오류 캐치】: [오류 발생 시 대응 방안]
  // 【테스트 요구사항 대응】: [테스트에서 기대하는 오류 처리를 만족시키기 위한 처리]
  return {
    성공: false,
    오류: 오류.message, // 【오류 정보】: 테스트에서 검증될 오류 메시지를 적절히 반환
  };
}
```

## 구현 예시
```javascript
/**
 * 【기능 개요】: JSON 파일 경로를 검증하여 유효/무효 경로를 분류합니다.
 * 【구현 방향】: 테스트 케이스를 통과하기 위한 최소한의 기능만 구현
 * 【테스트 대응】: tdd-red 단계에서 생성된 테스트 케이스 통과를 위한 구현
 */
function {{함수명}}(입력) {
  // 【입력값 검증】: 잘못된 입력값을 조기에 감지하여 오류 방지
  if (!입력) {
    // 【오류 처리】: 테스트에서 기대하는 오류 케이스에 대응
    throw new Error('입력값이 필요합니다');
  }

  // 【최소 구현】: 테스트를 통과하기 위한 가장 간단한 구현
  // 【하드코딩 허용】: 리팩토링 단계에서 개선 예정이므로, 현재 단계에서는 고정값으로 OK
  return {{간단한_반환값}};
}
```

## 단계적 구현 가이드라인

1. **먼저 하나의 테스트 케이스만 통과**
   - 【구현 전략】: 여러 테스트를 동시에 처리하는 것은 복잡성을 높이므로 피함
   - 【품질 보장】: 하나씩 꼼꼼하게 구현하여 품질 확보
2. **가장 쉬운 방법으로 구현**
   - 【단순 구현】: 복잡한 알고리즘은 나중에 리팩토링할 때 추가
   - 【가독성 중시】: 현재 단계에서는 이해하기 쉬운 것이 최우선
3. **파일 크기를 고려한 구현**
   - 【모듈 설계】: 나중에 500줄 미만이 되도록 기능을 적절히 분리
   - 【함수 분할】: 긴 함수는 작은 단위로 분할하여 구현
   - 【책임 경계】: 각 파일의 책임 범위를 명확히 하여 구현
4. **코드 품질 기준 고려**
   - 【정적 분석 대응】: 린트나 타입 체크에서 오류가 나지 않게 구현
   - 【형식 통일】: 프로젝트의 기존 형식에 맞춰 구현
   - 【명명 규칙 준수】: 프로젝트의 명명 규칙을 따름
5. **다른 테스트 케이스는 나중에**
   - 【단계적 개발】: TDD 원칙에 따라 한 단계씩 진행
   - 【영향 범위 제한】: 변경의 영향을 최소화
6. **오류 처리도 최소한으로**
   - 【필요 최소한】: 테스트에서 요구하는 부분만 구현
   - 【향후 확장 가능】: 리팩토링 단계에서 상세한 오류 처리를 추가 예정

## 제공해주세요

1. **구현 코드**: 테스트를 통과하는 코드 (필수 한국어 주석 포함)
2. **테스트 실행 결과**: Task 도구를 사용하여 실제로 테스트가 통과하는지 확인
3. **구현 설명**: 어떤 생각으로 구현했는지 (한국어 주석과의 대응 관계)
4. **과제 식별**: 현재 구현의 문제점 (리팩토링 대상 명확화)

구현 완료 후 다음을 실행하세요:

1. **메모 파일 업데이트**: docs/implements/{{task_id}}/{feature_name}-memo.md 파일의 Green 단계 섹션 업데이트
   - 구현 방향, 구현 코드, 테스트 결과, 과제/개선 사항 기록
   - 다음 Refactor 단계에서 참조할 수 있도록 상세히 기록
2. 구현 코드와 설계 내용을 docs/implements/{{task_id}}/{feature_name}-green-phase.md에 저장 (기존 파일이 있으면 추가)
3. TODO 상태 업데이트 (Green 단계 완료 표시)
4. **자동 전환 판정**: 다음 조건을 모두 만족하면 자동으로 `/tdd-refactor` 실행
   - Task 도구를 사용하여 모든 테스트가 성공한 것 확인
   - 구현이 단순하고 이해하기 쉬움
   - 명확한 리팩토링 지점이 있음
   - 기능적 문제가 없음
5. **수동 확인**: 자동 전환 조건을 만족하지 않으면 다음을 제공:
   - "Task 도구를 사용하여 테스트가 통과된 것을 확인했습니다."
   - "현재 구현: [간단한 설명]"
   - "구현에 포함한 한국어 주석: [주석의 목적과 내용]"
   - "리팩토링 후보: [개선이 필요한 점]"
   - "다음 Refactor 단계로 진행해도 될까요?"

## 품질 판정 기준

```
✅ 고품질:
- 테스트 결과: Task 도구 실행으로 모두 성공
- 구현 품질: 단순하며 동작함
- 리팩토링 지점: 명확히 식별 가능
- 기능적 문제: 없음
- 컴파일 오류: 없음

⚠️ 개선 필요:
- 테스트 일부 실패 (Task 도구로 감지)
- 구현이 너무 복잡함
- 리팩토링 방향이 불명확
- 기능에 대한 우려사항 있음
- 컴파일 오류 존재
```

## TODO 업데이트 패턴

```
- 현재 TODO "Green 단계 (최소 구현)"을 "완료"로 표시
- 최소 구현 단계 완료를 TODO 내용에 반영
- 품질 판정 결과를 TODO 내용에 기록
- 다음 단계(Refactor)를 위한 TODO 항목 추가
```
