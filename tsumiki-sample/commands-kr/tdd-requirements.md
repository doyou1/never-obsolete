# TDD 요구사항 정의 및 기능 명세 정리

TDD 개발을 시작합니다. 다음 기능에 대한 요구사항을 정리해 주세요:

**【기능명】**: {{feature_name}}

## 사전 준비

개발 컨텍스트를 준비합니다:

**Task 도구 실행**: `/tdd-load-context`로 TDD 관련 파일 로드 및 컨텍스트 준비 실행

로드 완료 후, 준비된 컨텍스트 정보를 바탕으로 TDD 요구사항 정의 작업을 시작합니다.

## TDD용 요구사항 정리 형식

**【신뢰성 수준 지시】**:
각 항목에 대해 원본 자료(EARS 요구사항 정의서·설계 문서 포함)와의 대조 상황을 다음 신호로 표시해 주세요:

- 🟢 **초록불**: EARS 요구사항 정의서·설계 문서를 참고하여 거의 추측하지 않은 경우
- 🟡 **노란불**: EARS 요구사항 정의서·설계 문서에서 타당한 추론인 경우
- 🔴 **빨간불**: EARS 요구사항 정의서·설계 문서에 없는 추론인 경우

## 1. 기능 개요 (EARS 요구사항 정의서·설계 문서 기반)

- 🟢🟡🔴 각 항목의 신뢰성 수준을 기재
- 어떤 기능인가 (사용자 스토리에서 추출)
- 어떤 문제를 해결하는가 (As a / So that에서 추출)
- 예상 사용자 (As a에서 추출)
- 시스템 내에서의 위치 (아키텍처 설계에서 추출)
- **참조한 EARS 요구사항**: [구체적인 요구사항 ID]
- **참조한 설계 문서**: [architecture.md의 해당 섹션]

## 2. 입출력 명세 (EARS 기능 요구사항·TypeScript 타입 정의 기반)

- 🟢🟡🔴 각 항목의 신뢰성 수준을 기재
- 입력 매개변수 (타입, 범위, 제약) - interfaces.ts에서 추출
- 출력값 (타입, 형식, 예시) - interfaces.ts에서 추출
- 입출력의 관계성
- 데이터 흐름 (dataflow.md에서 추출)
- **참조한 EARS 요구사항**: [구체적인 REQ-XXX]
- **참조한 설계 문서**: [interfaces.ts의 해당 인터페이스]

## 3. 제약 조건 (EARS 비기능 요구사항·아키텍처 설계 기반)

- 🟢🟡🔴 각 항목의 신뢰성 수준을 기재
- 성능 요구사항 (NFR-XXX에서 추출)
- 보안 요구사항 (NFR-XXX에서 추출)
- 호환성 요구사항 (REQ-XXX MUST에서 추출)
- 아키텍처 제약 (architecture.md에서 추출)
- 데이터베이스 제약 (database-schema.sql에서 추출)
- API 제약 (api-endpoints.md에서 추출)
- **참조한 EARS 요구사항**: [구체적인 NFR-XXX, REQ-XXX]
- **참조한 설계 문서**: [architecture.md, database-schema.sql 등의 해당 섹션]

## 4. 예상 사용 예시 (EARS 엣지 케이스·데이터 흐름 기반)

- 🟢🟡🔴 각 항목의 신뢰성 수준을 기재
- 기본적인 사용 패턴 (일반 요구사항 REQ-XXX에서 추출)
- 데이터 흐름 (dataflow.md에서 추출)
- 엣지 케이스 (EDGE-XXX에서 추출)
- 오류 케이스 (EDGE-XXX 오류 처리에서 추출)
- **참조한 EARS 요구사항**: [구체적인 EDGE-XXX]
- **참조한 설계 문서**: [dataflow.md의 해당 흐름도]

## 5. EARS 요구사항·설계 문서와의 대응 관계

기존 EARS 요구사항 정의서·설계 문서를 참조한 경우, 다음 대응 관계를 명시하세요:

- **참조한 사용자 스토리**: [스토리명]
- **참조한 기능 요구사항**: [REQ-001, REQ-002, ...]
- **참조한 비기능 요구사항**: [NFR-001, NFR-101, ...]
- **참조한 엣지 케이스**: [EDGE-001, EDGE-101, ...]
- **참조한 수용 기준**: [구체적인 테스트 항목]
- **참조한 설계 문서**:
  - **아키텍처**: [architecture.md의 해당 섹션]
  - **데이터 흐름**: [dataflow.md의 해당 흐름도]
  - **타입 정의**: [interfaces.ts의 해당 인터페이스]
  - **데이터베이스**: [database-schema.sql의 해당 테이블]
  - **API 명세**: [api-endpoints.md의 해당 엔드포인트]

정리 후 다음을 실행하세요:

1. 요구사항 정의서를 doc/implementation/{feature_name}-requirements.md에 저장 (기존 파일이 있으면 추가)
2. TODO 상태 업데이트 (요구사항 정의 완료 표시)
3. **품질 판정**: 요구사항의 품질을 다음 기준으로 판정
   - 요구사항이 명확하고 모호함이 없는가
   - 입출력 사양이 구체적으로 정의되었는가
   - 제약 조건이 명확한가
   - 구현 가능성이 확실한가
4. **다음 단계 표시**: 판정 결과와 관계없이 다음 추천 명령어 표시
   - "다음 추천 단계: `/tdd-testcases` 로 테스트 케이스 도출을 진행합니다."

## 품질 판정 기준

```
✅ 고품질:
- 요구사항의 모호함: 없음
- 입출력 정의: 완전함
- 제약 조건: 명확함
- 구현 가능성: 확실함

⚠️ 개선 필요:
- 요구사항에 모호한 부분이 있음
- 입출력 상세가 불명확함
- 기술적 제약이 불분명함
- 사용자 의도 확인이 필요함
```

## TODO 업데이트 패턴

```
- 현재 TODO를 "completed"로 표시
- 요구사항 정의 단계의 완료를 TODO 내용에 반영
- 다음 단계 "테스트 케이스 도출"을 TODO에 추가
- 품질 판정 결과를 TODO 내용에 기록
```

다음 단계: `/tdd-testcases` 로 테스트 케이스 도출을 진행합니다.
