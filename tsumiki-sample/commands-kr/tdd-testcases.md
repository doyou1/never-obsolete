# TDD 테스트 케이스 도출

이전에 정리한 요구사항을 기반으로 테스트 케이스를 도출합니다.

## 사전 준비

개발 컨텍스트를 준비합니다:

**Task 도구 실행**: `/tdd-load-context`로 TDD 관련 파일 로드 및 컨텍스트 준비 실행

로드 완료 후, 준비된 컨텍스트 정보를 바탕으로 테스트 케이스 도출을 진행합니다.

## 신뢰성 수준 지시

각 테스트 케이스 작성 시, 원본 자료(요구사항 정의, 기존 구현, 라이브러리 문서 등)와의 대조 상황을 다음 신호로 반드시 코멘트해 주세요:

- 🟢 **초록불**: 원본 자료를 참고하여 거의 추측하지 않은 경우
- 🟡 **노란불**: 원본 자료에서 타당한 추론인 경우
- 🔴 **빨간불**: 원본 자료에 없는 추론인 경우

## 테스트 케이스 분류

### 1. 정상 케이스 테스트 (기본 동작)

다음 형식으로 기재해 주세요:

- **테스트명**: [이해하기 쉬운 한국어 이름]
  - **무엇을 테스트하는가**: [이 테스트에서 확인하고자 하는 구체적인 동작이나 기능]
  - **예상되는 동작**: [어떤 처리가 정상적으로 실행되어야 하는지]
- **입력값**: [구체적인 값]
  - **입력 데이터의 의미**: [왜 이 입력값을 선택했는지, 무엇을 대표하는지]
- **예상 결과**: [구체적인 기대값]
  - **예상 결과의 이유**: [왜 이 결과가 올바른 것으로 간주되는지]
- **테스트 목적**: [무엇을 확인하고자 하는지]
  - **확인 포인트**: [특히 주의해서 검증해야 할 점]
- 🟢🟡🔴 이 테스트 케이스의 신뢰성 수준 기재

### 2. 예외 케이스 테스트 (오류 처리)

- **테스트명**: [이해하기 쉬운 한국어 이름]
  - **오류 케이스 개요**: [어떤 예외 상황을 가정하는지]
  - **오류 처리의 중요성**: [왜 이 오류 처리가 필요한지]
- **입력값**: [잘못된 값이나 경계를 넘어선 값]
  - **잘못된 이유**: [왜 이 입력값이 잘못된 것으로 간주되는지]
  - **실제 발생 시나리오**: [실제 운영에서 어떤 상황에서 발생할 수 있는지]
- **예상 결과**: [적절한 오류 메시지나 예외]
  - **오류 메시지 내용**: [사용자가 이해하기 쉬운 메시지인지]
  - **시스템 안전성**: [오류 발생 시 시스템이 안전한 상태를 유지할 수 있는지]
- **테스트 목적**: [오류 처리 확인]
  - **품질 보증 관점**: [이 테스트가 시스템 품질에 어떻게 기여하는지]
- 🟢🟡🔴 이 테스트 케이스의 신뢰성 수준 기재

### 3. 경계값 테스트 케이스 (최소값, 최대값, null 등)

- **테스트명**: [이해하기 쉬운 한국어 이름]
  - **경계값의 의미**: [왜 이 값이 경계로 중요한지]
  - **경계값에서의 동작 보장**: [경계 부근에서의 동작 일관성 확인]
- **입력값**: [경계값]
  - **경계값 선택 근거**: [왜 이 값을 경계값으로 선택했는지]
  - **실제 사용 시나리오**: [실제 운영에서 이 경계값이 어떤 영향을 미치는지]
- **예상 결과**: [경계에서의 동작]
  - **경계에서의 정확성**: [경계값에서의 계산이나 처리가 정확하게 이루어지는지]
  - **일관된 동작**: [경계의 안쪽과 바깥쪽에서 동작이 일관되는지]
- **테스트 목적**: [경계 조건 확인]
  - **견고성 확인**: [시스템이 극단적인 조건에서도 안정적으로 동작하는지]
- 🟢🟡🔴 이 테스트 케이스의 신뢰성 수준 기재

## 개발 언어·프레임워크

구현에 사용할 언어·테스트 프레임워크도 함께 지정해 주세요:

- **프로그래밍 언어**: {{language}}
  - **언어 선택 이유**: [왜 이 언어를 선택했는지]
  - **테스트에 적합한 기능**: [이 언어의 테스트에 유리한 특징]
- **테스트 프레임워크**: {{test_framework}}
  - **프레임워크 선택 이유**: [왜 이 테스트 프레임워크를 선택했는지]
  - **테스트 실행 환경**: [어떤 환경에서 테스트를 실행하는지]
- 🟢🟡🔴 이 내용의 신뢰성 수준 기재

## 테스트 케이스 구현 시 한국어 주석 지침

각 테스트 케이스 구현 시 다음 한국어 주석을 반드시 포함해 주세요:

### 테스트 케이스 시작 시 주석

```javascript
// 【테스트 목적】: [이 테스트로 무엇을 확인하는지 한국어로 명시]
// 【테스트 내용】: [구체적으로 어떤 처리를 테스트하는지 설명]
// 【예상되는 동작】: [정상 동작 시 결과 설명]
// 🟢🟡🔴 이 내용의 신뢰성 수준 기재
```

### Given(준비 단계) 주석

```javascript
// 【테스트 데이터 준비】: [왜 이 데이터를 준비하는지 이유]
// 【초기 조건 설정】: [테스트 실행 전 상태 설명]
// 【전제 조건 확인】: [테스트 실행에 필요한 전제 조건 명시]
```

### When(실행 단계) 주석

```javascript
// 【실제 처리 실행】: [어떤 기능/메서드를 호출하는지 설명]
// 【처리 내용】: [실행되는 처리의 내용을 한국어로 설명]
// 【실행 시점】: [왜 이 시점에 실행하는지 설명]
```

### Then(검증 단계) 주석

```javascript
// 【결과 검증】: [무엇을 검증하는지 구체적으로 설명]
// 【기대값 확인】: [기대되는 결과와 그 이유 설명]
// 【품질 보증】: [이 검증이 시스템 품질에 어떻게 기여하는지 설명]
```

### 각 expect 문의 주석

```javascript
// 【검증 항목】: [이 검증으로 확인하는 구체적인 항목]
// 🟢🟡🔴 이 내용의 신뢰성 수준 기재
expect(result.validPaths).toHaveLength(2); // 【확인 내용】: 유효한 경로가 정확히 2개 감지되는지 확인
expect(result.invalidPaths).toContain('nonexistent.json'); // 【확인 내용】: 존재하지 않는 파일이 잘못된 경로로 적절히 분류되는지 확인
```

### 설정/정리 주석

```javascript
beforeEach(() => {
  // 【테스트 전 준비】: [각 테스트 실행 전 수행할 준비 작업 설명]
  // 【환경 초기화】: [테스트 환경을 깨끗한 상태로 유지하는 이유와 방법]
});

afterEach(() => {
  // 【테스트 후 처리】: [각 테스트 실행 후 수행할 정리 작업 설명]
  // 【상태 복원】: [다음 테스트에 영향을 주지 않도록 상태를 복원하는 이유]
});
```

모두 도출한 후 다음을 실행하세요:

1. 테스트 케이스 목록을 doc/implementation/{feature_name}-testcases.md에 저장 (기존 파일이 있으면 추가)
2. TODO 상태 업데이트 (테스트 케이스 도출 완료 표시)
3. **품질 판정**: 테스트 케이스의 품질을 다음 기준으로 판정
   - 테스트 케이스 분류: 정상·예외·경계값이 모두 포함되어 있는가
   - 기대값 정의: 각 테스트 케이스의 기대값이 명확한가
   - 기술 선택: 프로그래밍 언어·테스트 프레임워크가 확정되었는가
   - 구현 가능성: 현재 기술 스택으로 실현 가능한가
4. **다음 단계 표시**: 판정 결과와 관계없이 다음 추천 명령어 표시
   - "다음 추천 단계: `/tdd-red` 로 Red 단계(실패 테스트 작성)를 시작합니다."

## 품질 판정 기준

다음 기준으로 테스트 케이스의 품질을 판정합니다:

```
✅ 고품질:
- 테스트 케이스 분류: 정상·예외·경계값이 모두 포함됨
- 기대값 정의: 각 테스트 케이스의 기대값이 명확함
- 기술 선택: 프로그래밍 언어·테스트 프레임워크가 확정됨
- 구현 가능성: 현재 기술 스택으로 실현 가능

⚠️ 개선 필요:
- 테스트 케이스에 누락이나 중복이 있음
- 기대값이 모호하거나 불충분함
- 기술 선택에 고민이 있음
- 너무 복잡하여 구현이 어려움

❌ 부적절:
- 요구사항과의 일관성이 없음
- 테스트 케이스가 부족함
- 기술적 실현 가능성에 문제가 있음
```

## TODO 업데이트 패턴

```
- 현재 TODO "테스트 케이스 도출"을 "completed"로 표시
- 테스트 케이스 정의 단계의 완료를 TODO 내용에 반영
- 품질 판정 결과를 TODO 내용에 기록
- 다음 단계 "Red 단계(실패 테스트 작성)"을 TODO에 추가
```
